<div class="container-fluid">
  <div class="roles-container">
    <div class="d-sm-flex justify-content-between align-items-center bg-dark px-3 py-2">
      <h4 class="text-light my-1 my-sm-0">Roles</h4>
      <button type="button" class="btn btn-success btn-sm my-1 my-sm-0" [disabled]="loading$ | async" (click)="openCreateRole()">
        <fa-icon [icon]="[ 'fas', 'plus-circle' ]" size="lg"></fa-icon>
        Crear un nuevo rol
      </button>
    </div>
    <div class="table-responsive-sm">
      <table class="table table-sm table-bordered table-hover">
        <ng-container *ngIf="roles$ | async as roles; else loadingRoles">
          <ng-container *ngIf="!!roles.length; else noRolesFound">
            <ng-container *ngTemplateOutlet="header; context: { $implicit: true }"></ng-container>
            <tbody>
              <tr *ngFor="let role of roles; let index = index">
                <th scope="row" class="text-center">{{ index + 1 }}</th>
                <td>{{ role.displayName }}</td>
              </tr>
            </tbody>
          </ng-container>
        </ng-container>
      </table>
    </div>
  </div>
</div>

<ng-template #header let-hasRoles>
  <caption *ngIf="!!hasRoles">Roles disponibles</caption>
  <thead class="thead-light">
    <tr class="text-center">
      <th scope="col">NÂ°</th>
      <th scope="col">Nombre del rol</th>
    </tr>
  </thead>
</ng-template>

<ng-template #noRolesFound>
  <ng-container [ngTemplateOutlet]="header"></ng-container>
  <tbody>
    <tr>
      <td colspan="2" class="text-black-50 text-center table-light">No hay roles registrados</td>
    </tr>
  </tbody>
</ng-template>

<ng-template #loadingRoles>
  <ng-container [ngTemplateOutlet]="header"></ng-container>
  <tbody>
    <tr>
      <th scope="row" colspan="2" class="text-black-50 text-center table-light">Cargando...</th>
    </tr>
  </tbody>
</ng-template>
